[build]
builder = "NIXPACKS"

[build.nixpacksPhase]
cmds = [
  "pip install -r requirements.txt",
  "python -m spacy download en_core_web_sm",
  "python -c 'import nltk; nltk.download(\"punkt\"); nltk.download(\"stopwords\")'"
]

[deploy]
startCommand = "gunicorn app:app --bind 0.0.0.0:$PORT --timeout 120 --workers 2"
restartPolicyType = "ON_FAILURE"
healthcheckPath = "/api/health"
healthcheckTimeout = 100